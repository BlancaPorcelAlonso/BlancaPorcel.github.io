<script src="https://cjrtnc.leaningtech.com/latest/loader.js"></script>
<script>
  const statusEl = document.getElementById("status");
  const log = m => { statusEl.textContent = m; console.log("[DEMO]", m); };

  // ✅ URL ABSOLUTA CORRECTA (¡sin "/" delante!)
  const JAR_URL = "https://blancaporcelalonso.github.io/BlancaPorcel.github.io/apps/Ajedrez.jar";

  async function run(){
    try{
      log("Inicializando CheerpJ…");
      await cheerpjInit();

      log("Comprobando acceso: " + JAR_URL);
      const head = await fetch(JAR_URL, { method: "HEAD" });
      if (!head.ok) throw new Error("No se puede acceder a " + JAR_URL + " (HTTP " + head.status + ")");

      log("Ejecutando el JAR (Main-Class del MANIFEST) …");
      await cheerpjRunJar(JAR_URL);   // ← pásale la URL completa

      log("Lanzado. Si es Swing, debería abrirse la ventana.");
    }catch(e){
      console.error(e);
      log("❌ ERROR: " + (e.message || e));
    }
  }

  window.addEventListener("load", run);
  document.getElementById("run").addEventListener("click", run);
</script>
