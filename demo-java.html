<script>
document.addEventListener("DOMContentLoaded", () => {
  const statusEl = document.getElementById("status");
  const runBtn = document.getElementById("run");
  const log = (m) => { statusEl.textContent = m; console.log("[DEMO]", m); };

  const JAR_PATH = "apps/Ajedrez.jar";

  async function run() {
    try {
      log("Inicializando CheerpJ…");
      await cheerpjInit();

      const head = await fetch(JAR_PATH, { method: "HEAD" });
      if (!head.ok) throw new Error("No se puede acceder al JAR (HTTP " + head.status + ")");

      log("Ejecutando el JAR…");
      await cheerpjRunJar(JAR_PATH);

      log("Lanzado. Si es Swing, debería abrirse la ventana.");
    } catch (e) {
      console.error(e);
      log("❌ ERROR: " + (e.message || e));
    }
  }

  runBtn.addEventListener("click", run);
  run(); // ejecuta automáticamente
});
</script>
